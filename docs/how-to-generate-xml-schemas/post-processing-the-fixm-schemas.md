# Post-processing the FIXM Schemas

The schemas generated by Sparx EA require minor post-processing to align with FIXM best practices and to increase their usability with a number of XML tools. For FIXM Core, BasicMessage, and FficeMessage, this post-processing has been automated and is performed by a Perl script, which makes the following changes to the generated schema files:

- Adds Base and Flight package imports to Fixm.xsd.

- Adds package-wide includes to Base.xsd.

- Adds package-wide includes to Flight.xsd.

- Adds package-wide includes to Cargo.xsd.

- Adds package-wide includes to FlightRouteTrajectory.xsd.

- Replaces Base package imports with a single import of Base.xsd.

- Replaces Flight package imports with a single import of Flight.xsd.

- Repeats similar modifications for the Basic Message and FF-ICE
    Message Applications packages.

- Adds "Type" to the end of all FIXM type names (both declaration and
    use).

- Alphabetizes attribute declarations.

- Removes empty sequences (an artifact of Sparx EA schema generation)

The Perl script developed<sup><a href="#how-to-generate-xml-schemas/post-processing-the-fixm-schemas?id=notes">[note 1]</a></sup> for this task can be downloaded [here](https://github.com/fixm-ccb/FIXM-Core-4.2.0/blob/master/docs/assets/downloads/postprocess.pl).

When invoking the script, provide the name of the directory containing
the generated schemas as a command line argument. The post-processing
script iterates through all files in the directory as well as all files
in all subdirectories below the supplied directory. The script prints
out the names of all the schema files it detects and processes as it
runs.

1. Invoke the Perl script to post-process your generated schemas.

    In this example, navigate to the directory your “schemas” directory is located in and then type: “perl postprocess.pl schemas”.

    Below is an example invocation of the script against the generated FIXM Core schemas along with the on-screen output it generates.

    ![Image](.//media/image234.png)

Three final notes about using the post-processing script:

- The supplied directory should contain only the schema files to be
    processed. Any other files present could be corrupted by this
    script.

- The script should only be run on the generated schemas once. Running
    the script multiple times will layer additional changes onto the
    schemas each time it is run, resulting in invalid schemas.

- The script was constructed specifically to run against FIXM Core
    4.2.0, FF-ICE Message 1.0.0, and Basic Message 1.0.0. Running the
    script against any other schemas without modifying the script
    appropriately will likely produce either problematic or insufficient
    modifications to the schemas.

## Notes

[1]: This Perl script was developed using perl 5, version 16, subversion 3 (v5.16.3) built for x86_64-linux-thread-multi and originally tested in a Linux environment (CentOS Linux 7 (Core)).  It was also tested using perl 5, version 28, subversion 1 (v5.28.1) built for MSWin32-x64-multi-thread in a Windows environment (Windows 7 Enterprise (Service Pack 1)).
